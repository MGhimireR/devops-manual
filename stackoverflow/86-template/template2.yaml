parameters:
- name: 'variabaleTemplate'
  default: 'variabales.yaml'
  type: string
- name: 'someVariable'
  type: string


jobs:
- job: BuildFromTemplate
  dependsOn: []
  variables:
  - name: assemblyVersion
    value: 1.2.3.4
  - name: test
    value: $[not(variables['assemblyVersion'])]
  steps:
  - ${{if not(parameters.someVariable)}}:
    - task: PowerShell@2
      enabled: false
      continueOnError: true
      inputs:
        targetType: 'inline'
        script: |
          Write-Host $(assemblyVersion)
          throw "assemblyVersion was not set"
  - task: PowerShell@2
    continueOnError: true
    inputs:
      targetType: 'inline'
      script: |
        Write-Host $(assemblyVersion)
        if (!'$(assemblyVersion)')
        {
          throw "assemblyVersion was not set"
        }
  - task: PowerShell@2
    continueOnError: true
    inputs:
      targetType: 'inline'
      script: |
        Write-Host $(assemblyVersion)
        Write-Host $(test)